<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="https://jenkins.tei-c.org/job/TEIP5-dev/lastStableBuild/artifact/P5/release/xml/tei/odd/p5.nvdl" type="application/xml" schematypens="http://purl.oclc.org/dsdl/nvdl/ns/structure/1.0"?>
<div xmlns="http://www.tei-c.org/ns/1.0" xml:id="chap-datamodel" xml:lang="de">
	<head>Das Datenmodell</head>
	<div xml:id="chap-usedSchema" xml:lang="de">
		<head>Verwendete Schemata</head>
		<p>Das Datenmodell ist stark an MEI angelehnt, stellt jedoch nicht die (inhaltliche) Codierung von Quellen oder Werken in den Mittelpunkt. Die aus MEI entlehnten Elemente sind bei Bedarf modifiziert worden, um sie für das neue Anwendungsfeld nutzbar zu machen. Elemente, die nicht dem MEI-Standard entspringen, wurden für diesen Anwendungszweck neu definiert.</p>
		<p>Innerhalb des crApp-Schemas befinden sich alle Elemente im crApp-Namspace. Eine Unterscheidung in crApp und MEI mittels Präfixierung hat sich zunächst als untauglich erwiesen.</p>
	</div>
	<div xml:id="chap-modules">
		<p>Das crApp-Schema besteht aus drei Modulen:</p>
		<p>
			<table xml:id="tab-modules">
				<row role="label">
					<cell>Modul Name</cell>
					<cell>Formeller Identifikator</cell>
					<cell>Definition und Erläuterung</cell>
				</row>
				<row>
					<cell>core</cell>
					<cell>Common Core</cell>
					<cell><ptr target="#chap-core"/></cell>
				</row>
				<row>
					<cell>remark</cell>
					<cell>Remarks and Annotations</cell>
					<cell><ptr target="#chap-remark"/></cell>
				</row>
				<row>
					<cell>setting</cell>
					<cell>Common Setting</cell>
					<cell><ptr target="#chap-setting"/></cell>
				</row>
			</table>
		</p>
	</div>
	<div xml:id="chap-setting">
		<head>Grundparameter (setting)</head>
		<p>Für die systematische Erfassung Kritischer Anmerkungen sind Grundparameter zu definieren: verfügbare Quellen, beteiligte Instrumente, referenzierte Editionen usw. Die Definition dieser Objekte erfolgt im
			Element <gi>setting</gi>. Ferner werden hier die möglichen Codierungsmöglichkeiten und Kontrollmechanismen festgelegt.</p>
		<p>
			<specList>
				<specDesc key="setting"/>
			</specList>
		</p>
		<p>Beim Element <gi>setting</gi> handelt es sich um einen Container, der sämtliche Definitionen für den zu erfassenden Kritischen Bericht enthält. Dieses Element dient allein zur Definition der Datenstruktur.</p>
		<p>Die Verwendung von <gi>setting</gi> als Wurzelelement ist erlaubt, um die Auslagerung und damit die Nachnutzung der Definition in mehreren (Werk-)Kontexten zu gewährleisten. Wird dieser Teil ausgelagert, kann das Setting durch XInclude in unterschiedliche Kritische Berichte inkludiert werden: <eg><tag>include xmlns="http://www.w3.org/2001/XInclude" href="setting.xml"</tag></eg></p>
		<div xml:id="mdivs">
			<head>Musikalische Struktur</head>
			<p><specList>
				<specDesc key="language"/>
				<specDesc key="macro.list.lang"/>
				</specList></p>
			<p>Zu Beginn wird die primäre Sprache definiert, in der die Anmerkungen verfasst sind. Diese wird durch den Wert im Attribut <att>codedval</att> erfasst. Die unterstützen Sprachen sind im Macro <ref target="#TEI.crapp_macro.list.lang"
				>macro.list.lang</ref> erfasst. Hier sind nur Sprachen verfügbar, welche von der crApp-WebApp unterstützt werden. Eine Erweiterung des Macros für individuelle Zwecke ist möglich und auch erwünscht.<note place="bottom">Für die Implementierung der neuen Sprache in die crApp-WebApp wenden Sie sich gerne auch an <ref target="mailto:forschung@dennisried.de">forschung@dennisried.de</ref>.</note></p>
			<p>
				<specList>
					<specDesc key="mdiv" atts="num sortNo"/>
					<specDesc key="mdivs"/>
				</specList>
			</p>
			<p>Das an MEI angelehnte Element <gi>mdiv</gi> steht für einen musikalischen Abschnitt (musical division). Dieses Element ist generisch angelegt und kann sowohl die Sätze eines Werkes definieren als auch Teilwerke einer Sammlung (bspw. einzelne Lieder einer Liedersammlung), Werkteile, wie die Nummern einer Oper oder sonstige Strukturen. Die Nummerierung der <gi>mdiv</gi>-Elemente durch das Attribut <att>num</att> ist obligatorisch und als eine technische Zählung zu betrachten. Das heißt, dass eine Nummerierung auch dann vergeben werden muss, wenn die einzelnen Abschnitte des beschriebenen Objekts nicht nummeriert sind! Als Werte sind ausschließlich Natürliche Zahlen (inkl. <val>0</val>) erlaubt. Diese Zählung ist für die spätere Zuordnung und Sortierung maßgeblich; daher ist die Verwendung arabischer Ziffern vorgegeben.</p>
			<p>Um dem <gi>mdiv</gi> einen Bezeichner beizugeben, wird das Element <gi>label</gi> unter Angabe der verwendeten Sprache (<att>xml:lang</att>) verwendet: </p>
			<p>
				<egXML xmlns="http://www.tei-c.org/ns/Examples">
					<mdiv num="0">
						<label xml:lang="de">Vorspiel</label>
						<label xml:lang="en">Prelude</label>
					</mdiv>
					<mdiv num="1">
						<label xml:lang="de">I. Männerchor</label>
						<label xml:lang="en">I. Men's choir</label>
					</mdiv>
				</egXML>
			</p>
			<p>Das Element <gi>mdivs</gi> ist ein Container für die einzelnen <gi>mdiv</gi>-Elemente.</p>
			<p>
				<specList>
					<specDesc key="measures" atts="total upbeat startNo"/>
					<specDesc key="meter" atts="count unit"/>
				</specList>
			</p>
			<p>Mit der Erfassung statistischer Werte zu den Takten (<gi>measures</gi>) des Satzes (<gi>mdiv</gi>) können weitere Validierungsmechanismen aktiviert werden. So kann neben der Gesamtzahl der Takte (<att>total</att>) auch die Existenz von Auftakten (<att>upbeat</att>) und die erste Taktzahl (<att>startNo</att>) erfasst werden, falls abweichend (z.B. <val>0</val>). Die Gesamtzahl der Takte wird für die Validierung der in den Anmerkungen angegebenen Taktzahlen verwendet.</p>
			<p>Die Erfassung des Metrums (<gi>meter</gi>) erfolgt, wie in MEI, mittels der Attribute <att>count</att> für den Zähler und <att>unit</att> für den Nenner. Mithilfe dieser Werte werden die Zählzeiten in den Anmerkungen validiert.<note place="bottom">Die Validierung der Zählzeiten funktioniert derzeit nur in Sätzen, in denen die Taktart nicht wechselt, da keine tiefer gehende Satzstruktur erfasst wird.</note></p>
		</div>
		<div xml:id="parts">
			<head>Instrumentation und Besetzung</head>
			<p><specList>
					<specDesc key="parts"/>
					<specDesc key="partGrp"/>
					<specDesc key="part"/>
				</specList></p>
			<p>Die Instrumentation kann äußerst komplex sein. Daher bietet das crApp-Schema die Möglichkeit, dass einzelne Stimmen zu Gruppen zusammengefasst werden. Das Element <gi>parts</gi> ist ein Container, der die Definition der Instrumentation enthält, unabhängig davon, wie diese im Detail organisiert ist.</p>
			<p>Das Element <gi>partGrp</gi> ist ebenfalls ein Container, der nicht nur zur Gruppierung verwendet werden, sondern gleichzeitig auch eine Gruppe von Einzelstimmen definieren kann. Dies lässt sich auf beliebig vielen Ebenen umsetzen.</p>
			<egXML xmlns="http://www.tei-c.org/ns/Examples">
				<parts>
					<partGrp xml:id="woods">
						<label xml:lang="de">Holz</label>
						<label xml:lang="en">Woods</label>
						<partGrp xml:id="flutes">
							<label xml:lang="de">Flöten</label>
							<label xml:lang="en">Flutes</label>
							<part xml:id="flute.i">
								<label xml:lang="de">Flöte I</label>
								<label xml:lang="en">1st Flute</label>
							</part>
							<part xml:id="flute.ii">
								<label xml:lang="de">Flöte II</label>
								<label xml:lang="en">2nd Flute</label>
							</part>
						</partGrp>
					</partGrp>
				</parts>
			</egXML>
			<p>Der im Beispiel gezeigte Wert des Attributs <att>xml:id</att> muss eindeutig sein, da hierüber die Zuordnung der Anmerkungen zu den adressierten Stimmen hergestellt wird. Es empfiehlt sich, die Werte wie im vorangegangenen Beispiel generisch zu wählen, unter Vermeidung von Umlauten und Leerzeichen, um technische Probleme vorzubeugen.</p>
			<p>Mit der Definition einer Gruppierung (bspw. Stimmgruppe »Holz«) wird das Ansteuern dieser Gruppe möglich, ohne dass jede Stimme einzeln adressiert werden muss.</p>
			<p>Die im vorigen Beispiel abgebildete Verschachtelung kann durch das Schema validiert werden. Eine Schematron-Regel prüft, ob die in der Anmerkung als Partizipatoren angegebenen Stimmen bereits durch eine übergeordnete Gruppe adressiert wurden und warnt ggf. vor entstehenden Redundanzen.</p>
		</div>
		<div xml:id="relWorks">
			<head>Assoziierte Werke (related works)</head>
			<p><specList>
				<specDesc key="relWork"/>
			</specList></p>
			<p>Mit <gi>relWork</gi> erfolgt die Zuordnung des Kritischen Berichts zu einem Werk. Dies kann mittels ID-Verweis geschehen (<att>key</att>) oder über einen expliziten Dateipfad, der im Attribut <att>target</att> angegeben wird.</p>
			<p>Sind die erfassten Anmerkungen für die Weiterverwendung in der crApp-Applikation vorgesehen, so ist es ausreichend, wenn die Referenzierung über das Attribut <att>key</att> erfolgt. Es wird vorausgesetzt, dass sich die Referenzdatensätze in der selben Datenbank befinden, in der die Applikation installiert ist.</p>
			<p>Im Falle, dass der Pfad zum Referenzdatensatz zu einem anderen Ort zeigen soll, kann der entsprechende Pfad als Wert von <att>target</att> angegeben werden. Dies bietet sich beispielsweise dann an, wenn lokale Transformationen durchgeführt werden, bei denen eine Ansprache über eine ID zu große Hardware-Kapazitäten erfordern würde.</p>
		</div>
		<div xml:id="relSources">
			<head>Assoziierte Quellen (related sources)</head>
			<p><specList>
				<specDesc key="manifestationList"/>
				<specDesc key="manifestation"/>
			</specList></p>
			<p>Die Referenzierung der Referenzdatensätzen zu Quellen erfolgt analog zu <ptr target="#relWorks"/>.</p>
			<p>Im Vergleich zu <gi>relWork</gi> weist das Element <gi>manifestation</gi> eine Erweiterung auf: Das Attribut <att>sortNo</att> kann dazu verwendet werden, um eine Reihenfolge für die Anzeigereihenfolge der Quellen in der crApp-Applikation festzulegen.<note place="bottom">Eine Visualisierung der Abhängigkeiten zwischen Quellen (i.e. Stemma) ist nicht implementiert. Das Datenmodell geht diesbezüglich agnostisch vor.</note></p>
			<p>
				<egXML xmlns="http://www.tei-c.org/ns/Examples" source="baudi-14-2b84beeb_mdiv-00.xml">
					<manifestationList>
						<manifestation sortNo="1" xml:id="A-P1">
							<label xml:lang="de">Handschriftliche Partitur (Vorspiel)</label>
							<label xml:lang="en">Handwritten score (prelude)</label>
						</manifestation>
					</manifestationList>
			</egXML></p>
		</div>
		<div xml:id="relEditions">
			<head>Assoziierte Editionen (related editions)</head>
			<p>
				<specList>
				<specDesc key="edition"/>
				<specDesc key="relEditions"/>
				</specList>
			</p>
			<p>Diese Elemente sind von <ptr target="#relSources"/> abgeleitet und verhalten sich analog.</p>
		</div>
		<div xml:id="classifications">
			<head>Klassifikationen</head>
			<p>
				<specList>
					<specDesc key="classifications"/>
					<specDesc key="classGrp"/>
					<specDesc key="class"/>
				</specList>
			</p>
			<p>Klassifikationen sind für die Erfassung strukturierter Daten notwendig.</p>
			<egXML xmlns="http://www.tei-c.org/ns/Examples">
				<classifications>
					<classGrp label="editorialClassifications">
						<class xml:id="noEnd">
							<label xml:lang="de">Nur beginnend</label>
							<label xml:lang="en">Only initiating</label>
						</class>
						<class xml:id="noStart">
							<label xml:lang="de">Nur endend</label>
							<label xml:lang="en">Only terminating</label>
						</class>
						<class xml:id="without">
							<label xml:lang="de">ohne</label>
							<label xml:lang="en">without</label>
						</class>
						<class xml:id="ediAdd">
							<label xml:lang="de">Hinzufügung</label>
							<label xml:lang="en">Addition</label>
						</class>
						<class xml:id="ediDel">
							<label xml:lang="de">Tilgung</label>
							<label xml:lang="en">Deletion</label>
						</class>
					</classGrp>
				</classifications>
			</egXML>
			<p>Im angeführten Beispiel wird eine Klassifikationsgruppe gezeigt, mithilfe derer Elemente in den Anmerkungen klassifiziert werden können. Das Schema erlaubt die Definition beliebig vieler <gi>classGrp</gi>-Elemente, die wiederum beliebig viele <gi>class</gi>-Elemente enthalten können.</p>
		</div>
		<div xml:id="hands">
			<head>Schreibmittel und Schreiber</head>
			<p><specList>
				<specDesc key="handList"/>
				<specDesc key="hand" atts="cert initial medium"/>
			</specList></p>
			<p>Im Container <gi>handList</gi> können Schreibmittel, Schreibstile und Schreibende erfasst werden.</p>
			<egXML xmlns="http://www.tei-c.org/ns/Examples">
				<handList>
					<hand xml:id="hand.1" medium="ink.black" initial="true"><name>Ludwig Baumann</name></hand>
				</handList>
			</egXML>
			<p>Die Angabe der Attribute <att>cert</att>, <att>initial</att> und <att>medium</att> sind ebenso optional wie die Angabe der Schreibenden (hier: Ludwig Baumann).</p>
		</div>
	</div>
	<div xml:id="chap-remark">
		<head>Kritische Anmerkungen (remark)</head>
		<specList>
			<specDesc key="remarks"/>
			<specDesc key="remark" atts="type"/>
		</specList>
		<p>Der Container <gi>remarks</gi> beinhaltet die Kritischen Anmerkungen. Das Element <gi>remark</gi> stellt die Einzelanmerkung dar.</p>
		<egXML xmlns="http://www.tei-c.org/ns/Examples">
			<remark type="editorial" xml:id="baudi-30-60dcfc3b">
				<class>Tempoangabe</class>
				<mdiv>0</mdiv>
				<occurances>
					<occurance>
						<position measure="1" count="1"/>
					</occurance>
				</occurances>
				<parts>
					<part>organ.right</part>
				</parts>
				<annots>
					<annot>
						<tempo class="#without"/>
					</annot>
				</annots>
				<manifestationList>
					<manifestation>ED-KA1</manifestation>
					<manifestation>ED-KA2</manifestation>
				</manifestationList>
				<editionList>
					<edition>BauDi-Harm</edition>
					<edition>BauDi-KA</edition>
				</editionList>
			</remark>
		</egXML>
		<p><specList>
			<specDesc key="class"/>
		</specList></p>
		<p>Das Element <gi>class</gi> dient der Klassifizierung. Die Werte, die hier als Text eingegeben werden, entsprechen der Klassifizierung in <gi>setting</gi>. Wird ein Wert eingegeben, der nicht zuvor definiert wurde, meldet die Schematron-Validierung einen Fehler.</p>
		<p>
			<specList>
				<specDesc key="mdiv"/>
			</specList>
		</p>
		<p>Über <gi>mdiv</gi> erfolgt eine Zuordnung zu dem musikalischen Abschnitt, in dem die Anmerkung vorkommt. Für den Fall, dass eine Anmerkung sich auf mehrere Sätze bezieht (bspw. eine Parallelstelle, die in einem anderen Satz in Erscheinung tritt), können mehrere <gi>mdiv</gi> Elemente angegeben werden. In diesem Fall weist die Schematron-Validierung darauf hin, dass dieses Verfahren möglich, jedoch eher unüblich ist. Auf <gi>mdiv</gi> kann jedoch auch verzichtet werden, wenn es sich um eine Generalanmerkung handelt.</p>
		<p>
			<specList>
				<specDesc key="occurances"/>
				<specDesc key="occurance"/>
				<specDesc key="position" atts="count measure"/>
				<specDesc key="range" atts="count measure type"/>
			</specList>
		</p>
		<p>Das Element <gi>occurances</gi> ist ein Container für alle Vorkommen, bei denen die Kritische Anmerkung relevant ist. Da es durchaus vorkommen kann, dass eine Anmerkung an mehreren Stellen Relevanz ist (bspw. in den Takten 2, 4, 5 und 8 enden die Bögen bereits eine Achtel früher), kann das Element <gi>occurance</gi> mehrfach verwendet werden.</p>
		<p>Eine Taktposition kann auf zwei verschiedene Arten identifiziert werden: als Position (<gi>position</gi>) oder als Bereich (<gi>range</gi>). Im ersten Fall werden Taktzahl und ggf. Zählzeit angeben.</p>
		<egXML xmlns="http://www.tei-c.org/ns/Examples">
			<occurance>
				<position measure="2" count="3"/>
			</occurance>
		</egXML>
		<p>Beschreibt die Anmerkung einen Bereich (bspw. Takt 1 Zählzeit 1 bis Takt 3 Zählzeit 4), können Start- und Endpunkt mit dem Element <gi>range</gi> unter Verwendung des Attributes <att>type</att>
			(Werte <val>start</val>/<val>end</val>) angegeben werden.</p>
		<egXML xmlns="http://www.tei-c.org/ns/Examples">
			<occurance>
				<range type="start" measure="1" count="1"/>
				<range type="end" measure="3" count="4"/>
			</occurance>
		</egXML>
		<p><specList>
			<specDesc key="parts"/>
			<specDesc key="partGrp"/>
			<specDesc key="part"/>
		</specList></p>
		<p>Betroffene Stimmen werden im Element <gi>parts</gi> angegeben. Der Wrapper <gi>parts</gi> kann neben den Elementen <gi>part</gi> und <gi>partGrp</gi> auch den Text <val>all</val> und <val>none</val> enthalten, wenn (bspw. in Generalanmerkungen) alle oder keine Stimmen betroffen sind.</p>
		<egXML xmlns="http://www.tei-c.org/ns/Examples">
			<parts>
				<part>trombone.i</part>
				<part>trombone.iii</part>
			</parts>
		</egXML>
		<p>Die Textknoten von <gi>partGrp</gi> und <gi>part</gi> enthalten die ID der entsprechenden Stimmendefinition in <gi>setting</gi>.</p>
		<p><specList>
			<specDesc key="annots"/>
			<specDesc key="annot"/>
		</specList></p>
		<p>Der Wrapper <gi>annots</gi> erlaubt die Erfassung mehrerer Anmerkungen/Befunde. Durch das Attribut <att>type</att> und den Wert <val>intern</val> lassen sich Anmerkungen als kennzeichnen, die nicht für die Publikation vorgesehen sind.</p>
		<p>Die Codierungsmöglichkeiten innerhalb von <gi>annot</gi> sind im Macro macro.annot.content definiert.</p>
		<p><specList>
			<specDesc key="manifestationList"/>
			<specDesc key="editionList"/>
		</specList></p>
		<p>Die Wrapper <gi>manifestationList</gi> und <gi>editionList</gi> verhalten sich analog. Sie enthalten je ein oder mehrere Elemente (<gi>manifestation</gi> bzw. <gi>edition</gi>), deren Textknoten die ID eines in <gi>setting</gi> definierten Objektes darstellt.</p>
	</div>
	<div xml:id="chap-core">
		<head>Datentypen, Klassen, Macros (core)</head>
		<p>Zu den Datentypen, Attributklassen und Macros siehe die Definitionen im Anhang.</p>
	</div>
</div>
